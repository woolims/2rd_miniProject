<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bid">

<!-- 입찰페이지정보 전체조회 -->
<select id="select_bid" resultType="bid">
 	select * from bid
</select>

<!-- 입찰페이지 번호만 조회 -->
<select id="selectOne_bidNo" resultType="int">
 	select bidNo from bid
</select>

<!-- 유저 번호만 조회 -->
<!-- <select id="selectOne_userNo" resultType="int">
 	select userNo from bid
</select> -->


<!-- 아무도 입찰을 안 했을 때 경매최저가 -->
<select id="new_bid_price_select" resultType="int" parameterType="int">
	select startPrice from Product where pNo=#{pNo}
</select>


<!-- 입찰에 참가한 사람의 정보 -->
<insert id="users_bid_insert" parameterType="bid">
	insert into BidPlayer values(#{bidNo},
							 	 #{bidPNo},
								 #{userNo},
								 #{playPrice}
</insert>
<!-- 경매페이지에 띄울 최고입찰금액 -->
<select  id="entry_bid_select" parameterType="int" resultType="int">
	select max(entryBidPrice) from bid  where pNo=#{pNo}
</select>


<!-- 경매에 참여한 개인이 입력한 최고값 개인열람용-->
<update id="entry_bid_person_update" parameterType="bid">
	update bid set entryBidPrice=#{entryBidPrice} where bidNo=#{bidNo} and userNo=#{userNo}
</update>


<!-- 입장시 유저의 캐시보유량 체크 -->
<select id="cashCheck" resultType="int" parameterType="int">
	select myCash from Users where userNo=#{userNo}
</select>



</mapper>
